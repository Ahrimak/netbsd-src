<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  	$NetBSD: quotacheck.8,v 1.18 2012/02/13 19:53:25 dholland Exp $
  
   Copyright (c) 1983, 1990, 1991, 1993
  	The Regents of the University of California.  All rights reserved.
  
   This code is derived from software contributed to Berkeley by
   Robert Elz at The University of Melbourne.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   3. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
       @(#)quotacheck.8	8.1 (Berkeley) 6/5/93
   -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>QUOTACHECK(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">QUOTACHECK(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">QUOTACHECK(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">quotacheck</code> &#x2014;
<div class="Nd">filesystem quota consistency checker</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">quotacheck</code></td>
    <td>[<code class="Fl">-gquv</code>] <var class="Ar">filesystem</var>
      <var class="Ar">...</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">quotacheck</code></td>
    <td>[<code class="Fl">-gquv</code>] [<code class="Fl">-l</code>
      <var class="Ar">maxparallel</var>] <code class="Fl">-a</code></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<code class="Nm">quotacheck</code> examines each filesystem, builds a table of
  current disk usage, and compares this table against that recorded in the disk
  quota file for the filesystem. If any inconsistencies are detected, both the
  quota file and the current system copy of the incorrect quotas are updated
  (the latter only occurs if an active filesystem is checked). By default both
  user and group quotas are checked.
<p class="Pp">Available options:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#a"><code class="Fl" id="a">-a</code></a></dt>
  <dd>If the <code class="Fl">-a</code> flag is supplied in place of any
      filesystem names, <code class="Nm">quotacheck</code> will check all the
      filesystems indicated in <span class="Pa">/etc/fstab</span> to be
      read-write with disk quotas. By default only the types of quotas listed in
      <span class="Pa">/etc/fstab</span> are checked. See also
      <code class="Fl">-l</code>.</dd>
  <dt><a class="permalink" href="#g"><code class="Fl" id="g">-g</code></a></dt>
  <dd>Only group quotas listed in <span class="Pa">/etc/fstab</span> are to be
      checked. See also <code class="Fl">-u</code>.</dd>
  <dt><a class="permalink" href="#l"><code class="Fl" id="l">-l</code></a>
    <var class="Ar">maxparallel</var></dt>
  <dd>Limit the number of parallel checks to the number specified in the
      following argument. By default, the limit is the number of disks, running
      one process per disk. If a smaller limit is given, the disks are checked
      round-robin, one file system at a time. This option is only valid with
      <code class="Fl">-a</code>.</dd>
  <dt><a class="permalink" href="#q"><code class="Fl" id="q">-q</code></a></dt>
  <dd><code class="Nm">quotacheck</code> runs more quickly, particularly on
      systems with sparse user id usage, but fails to correct quotas for users
      [groups] not in the system user [group] database, and owning no files on
      the filesystem, if the quota file incorrectly believes that they do.</dd>
  <dt><a class="permalink" href="#u"><code class="Fl" id="u">-u</code></a></dt>
  <dd>Only user quotas listed in <span class="Pa">/etc/fstab</span> are to be
      checked. See also <code class="Fl">-g</code>.</dd>
  <dt><a class="permalink" href="#v"><code class="Fl" id="v">-v</code></a></dt>
  <dd><code class="Nm">quotacheck</code> is more verbose, and reports corrected
      discrepancies between the calculated and recorded disk quotas.</dd>
</dl>
<p class="Pp">Specifying both <code class="Fl">-g</code> and
    <code class="Fl">-u</code> is equivalent to the default. Parallel passes are
    run on the filesystems required, using the pass numbers in
    <span class="Pa">/etc/fstab</span> in an identical fashion to
    <a class="Xr" href="../html8/fsck.html">fsck(8)</a>.</p>
<p class="Pp">Normally <code class="Nm">quotacheck</code> operates silently.</p>
<p class="Pp"><code class="Nm">quotacheck</code> expects each filesystem to be
    checked to have a quota files named <span class="Pa">quota.user</span> and
    <span class="Pa">quota.group</span> which are located at the root of the
    associated file system. These defaults may be overridden in
    <span class="Pa">/etc/fstab</span>. If a file is not present,
    <code class="Nm">quotacheck</code> will create it.</p>
<p class="Pp"><code class="Nm">quotacheck</code> is normally run at boot time
    from the <span class="Pa">/etc/rc</span> file, see
    <a class="Xr" href="../html8/rc.html">rc(8)</a>, before enabling disk quotas
    with <a class="Xr" href="../html8/quotaon.html">quotaon(8)</a>.</p>
<p class="Pp"><code class="Nm">quotacheck</code> accesses the raw device in
    calculating the actual disk usage for each user. Thus, the filesystems
    checked should be quiescent while <code class="Nm">quotacheck</code> is
    running.</p>
<p class="Pp">If <code class="Nm">quotacheck</code> receives a
    <code class="Dv">SIGINFO</code> signal (see the <b class="Sy">status</b>
    argument for <a class="Xr" href="../html1/stty.html">stty(1)</a>), a line
    will be written to the standard error output indicating the name of the
    device currently being checked and progress information.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">quota.user</span></dt>
  <dd>at the filesystem root with user quotas</dd>
  <dt><span class="Pa">quota.group</span></dt>
  <dd>at the filesystem root with group quotas</dd>
  <dt><span class="Pa">/etc/fstab</span></dt>
  <dd>default filesystems</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" href="../html1/quota.html">quota(1)</a>,
  <a class="Xr" href="../html3/libquota.html">libquota(3)</a>,
  <a class="Xr" href="../html5/fstab.html">fstab(5)</a>,
  <a class="Xr" href="../html8/edquota.html">edquota(8)</a>,
  <a class="Xr" href="../html8/fsck.html">fsck(8)</a>,
  <a class="Xr" href="../html8/quotaon.html">quotaon(8)</a>,
  <a class="Xr" href="../html8/repquota.html">repquota(8)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
The <code class="Nm">quotacheck</code> command appeared in
  <span class="Ux">4.2BSD</span>.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 5, 2004</td>
    <td class="foot-os">NetBSD 10.99</td>
  </tr>
</table>
</body>
</html>
