<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  	$NetBSD: extattrctl.8,v 1.5 2011/06/17 18:20:40 wiz Exp $
  
   Copyright (c) 2000-2001 Robert N. M. Watson
   All rights reserved.
  
   This software was developed by Robert Watson for the TrustedBSD Project.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
  
   THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE AUTHOR OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
   $FreeBSD: src/usr.sbin/extattrctl/extattrctl.8,v 1.24 2005/02/09 18:04:40 ru Exp $
  
   Developed by the TrustedBSD Project.
   Support for file system extended attribute.
   -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>EXTATTRCTL(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EXTATTRCTL(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">EXTATTRCTL(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">extattrctl</code> &#x2014;
<div class="Nd">manage UFS1 extended attributes</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">extattrctl</code></td>
    <td><code class="Cm">start</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">extattrctl</code></td>
    <td><code class="Cm">stop</code> <var class="Ar">path</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">extattrctl</code></td>
    <td><code class="Cm">initattr</code> [<code class="Fl">-f</code>]
      [<code class="Fl">-p</code> <var class="Ar">path</var>]
      <var class="Ar">attrsize</var> <var class="Ar">attrfile</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">extattrctl</code></td>
    <td><code class="Cm">showattr</code> <var class="Ar">attrfile</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">extattrctl</code></td>
    <td><code class="Cm">enable</code> <var class="Ar">path</var>
      <var class="Ar">attrnamespace</var> <var class="Ar">attrname</var>
      <var class="Ar">attrfile</var></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">extattrctl</code></td>
    <td><code class="Cm">disable</code> <var class="Ar">path</var>
      <var class="Ar">attrnamespace</var> <var class="Ar">attrname</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <code class="Nm">extattrctl</code> utility is the management utility for
  extended attributes over the UFS1 file system. It allows the starting and
  stopping of extended attributes on a file system, as well as initialization of
  attribute backing files, and enabling and disabling of specific extended
  attributes on a file system.
<p class="Pp">The first argument on the command line indicates the operation to
    be performed. Operation must be one of the following:</p>
<dl class="Bl-tag">
  <dt><a class="permalink" href="#start"><code class="Cm" id="start">start</code></a>
    <var class="Ar">path</var></dt>
  <dd>Start extended attribute support on the file system named using
      <var class="Ar">path</var>. The file system must be a UFS1 file system,
      and the <code class="Dv">UFS_EXTATTR</code> kernel option must have been
      enabled. If <span class="Pa">.attribute/user</span> and
      <span class="Pa">.attribute/system</span> exist at the filesystem root,
      extended attributes backed by files in these directories will be
      automatically enabled. Note that extended attributes can be automatically
      started at mount time by using the <code class="Cm">-o extattr</code>
      option to <a class="Xr" href="../html8/mount.html">mount(8)</a>.</dd>
  <dt><a class="permalink" href="#stop"><code class="Cm" id="stop">stop</code></a>
    <var class="Ar">path</var></dt>
  <dd>Stop extended attribute support on the file system named using
      <var class="Ar">path</var>. Extended attribute support must previously
      have been started.</dd>
  <dt><a class="permalink" href="#initattr"><code class="Cm" id="initattr">initattr</code></a>
    [<code class="Fl">-f</code>] [<code class="Fl">-p</code>
    <var class="Ar">path</var>] <var class="Ar">attrsize attrfile</var></dt>
  <dd>Create and initialize a file to use as an attribute backing file. You must
      specify a maximum per-inode size for the attribute in bytes in
      <var class="Ar">attrsize</var>, as well as the file where the attribute
      will be stored, using <var class="Ar">attrfile</var>.
    <p class="Pp">The <code class="Fl">-f</code> argument may be used to
        indicate that it is alright to overwrite an existing attribute backing
        file; otherwise, if the target file exists, an error will be
      returned.</p>
    <p class="Pp">The <code class="Fl">-p</code> <var class="Ar">path</var>
        argument may be used to preallocate space for all attributes rather than
        relying on sparse files to conserve space. This has the advantage of
        guaranteeing that space will be available for attributes when they are
        written, preventing low disk space conditions from denying attribute
        service.</p>
    <p class="Pp">This file should not exist before running
        <code class="Cm">initattr</code>.</p>
    <p class="Pp">When a user attempts to set a &#x201C;user&#x201D; or
        &#x201C;system&#x201D; extended attribute that lacks a backing file, the
        kernel will attempt to automatically create it, provided
        <span class="Pa">.attribute/user</span> or
        <span class="Pa">.attribute/system</span> exist and are writable by the
        requesting user.</p>
  </dd>
  <dt><a class="permalink" href="#showattr"><code class="Cm" id="showattr">showattr</code></a>
    <var class="Ar">attrfile</var></dt>
  <dd>Show the attribute header values in the attribute file named by
      <var class="Ar">attrfile</var>.</dd>
  <dt><a class="permalink" href="#enable"><code class="Cm" id="enable">enable</code></a>
    <var class="Ar">path attrnamespace attrname attrfile</var></dt>
  <dd>Enable an attribute named <var class="Ar">attrname</var> in the namespace
      <var class="Ar">attrnamespace</var> on the file system identified using
      <var class="Ar">path</var>, and backed by initialized attribute file
      <var class="Ar">attrfile</var>. Available namespaces are
      &#x201C;user&#x201D; and &#x201C;system&#x201D;. The backing file must
      have been initialized using <code class="Cm">initattr</code> before its
      first use. Attributes must have been started on the file system prior to
      the enabling of any attributes.</dd>
  <dt><a class="permalink" href="#disable"><code class="Cm" id="disable">disable</code></a>
    <var class="Ar">path attrnamespace attrname</var></dt>
  <dd>Disable the attributed named <var class="Ar">attrname</var> in namespace
      <var class="Ar">attrnamespace</var> on the file system identified by
      <var class="Ar">path</var>. Available namespaces are &#x201C;user&#x201D;
      and &#x201C;system&#x201D;. The file system must have attributes started
      on it, and the attribute most have been enabled using
      <code class="Cm">enable</code>.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<div class="Bd Bd-indent"><code class="Li">extattrctl start /</code></div>
<p class="Pp">Start extended attributes on the root file system.</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">extattrctl initattr 17
  /.attribute/system/md5</code></div>
<p class="Pp">Create an attribute backing file in
    <span class="Pa">/.attribute/system/md5</span>, and set the maximum size of
    each attribute to 17 bytes, with a sparse file used for storing the
    attributes.</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">extattrctl enable / system md5
  /.attribute/system/md5</code></div>
<p class="Pp">Enable an attribute named md5 on the root file system, backed from
    the file <span class="Pa">/.attribute/system/md5</span>.</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">extattrctl disable / md5</code></div>
<p class="Pp">Disable the attribute named md5 on the root file system.</p>
<p class="Pp"></p>
<div class="Bd Bd-indent"><code class="Li">extattrctl stop /</code></div>
<p class="Pp">Stop extended attributes on the root file system.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" href="../html1/getextattr.html">getextattr(1)</a>,
  <a class="Xr" href="../html2/extattr_get_file.html">extattr_get_file(2)</a>,
  <a class="Xr" href="../html9/extattr.html">extattr(9)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
Extended attribute support was developed as part of the TrustedBSD Project, and
  introduced in <span class="Ux">FreeBSD 5.0</span> and <span class="Ux">NetBSD
  4.0</span>. It was developed to support security extensions requiring
  additional labels to be associated with each file or directory. Backing file
  autocreation was added in <span class="Ux">NetBSD 6.0</span>.
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<span class="An">Robert N M Watson</span>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<code class="Nm">extattrctl</code> works only on UFS1 file systems. The kernel
  support for extended attribute backing files and this control program should
  be generalized for any file system that lacks native extended attribute
  support.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">June 17, 2011</td>
    <td class="foot-os">NetBSD 10.99</td>
  </tr>
</table>
</body>
</html>
