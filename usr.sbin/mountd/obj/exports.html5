<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
  	$NetBSD: exports.5,v 1.32 2013/03/28 22:54:25 njoly Exp $
  
   Copyright (c) 1989, 1991, 1993
  	The Regents of the University of California.  All rights reserved.
  
   Redistribution and use in source and binary forms, with or without
   modification, are permitted provided that the following conditions
   are met:
   1. Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
   2. Redistributions in binary form must reproduce the above copyright
      notice, this list of conditions and the following disclaimer in the
      documentation and/or other materials provided with the distribution.
   3. Neither the name of the University nor the names of its contributors
      may be used to endorse or promote products derived from this software
      without specific prior written permission.
  
   THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
   ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
   FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
   DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
   OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
   HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
   LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
   OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
   SUCH DAMAGE.
  
       @(#)exports.5	8.3 (Berkeley) 3/29/95
   -->
<head>
  <meta charset="utf-8"/>
  <link rel="stylesheet" href="../style.css" type="text/css" media="all"/>
  <title>EXPORTS(5)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">EXPORTS(5)</td>
    <td class="head-vol">File Formats Manual</td>
    <td class="head-rtitle">EXPORTS(5)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<code class="Nm">exports</code> &#x2014;
<div class="Nd">define remote mount points for NFS mount requests</div>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">exports</code></td>
    <td></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
The <code class="Nm">exports</code> file specifies remote mount points for the
  NFS mount protocol per the NFS server specification; see
  <span class="RsT">Network File System Protocol Specification RFC 1094,
  Appendix A</span> and <span class="RsT">NFS: Network File System Version 3
  Specification, Appendix I.</span>
<p class="Pp">Each line in the file (other than comment lines that begin with a
    &#x2018;#&#x2019;) specifies the mount point(s) and export flags within one
    local server filesystem for one or more hosts. A host may be specified only
    once for each local filesystem on the server and there may be only one
    default entry for each server filesystem that applies to all other hosts.
    The latter exports the filesystem to the &#x201C;world&#x201D; and should be
    used only when the filesystem contains public information.</p>
<p class="Pp">If you have modified the <span class="Pa">/etc/exports</span>
    file, send the mountd a SIGHUP to make it re-read the
    <span class="Pa">/etc/exports</span> file: &#x201C;kill -HUP `cat
    /var/run/mountd.pid`&#x201D;.</p>
<p class="Pp">In a mount entry, the first field(s) specify the directory path(s)
    within a server filesystem that can be mounted on by the corresponding
    client(s). There are two forms of this specification. The first is to list
    all mount points as absolute directory paths separated by whitespace. The
    second is to specify the pathname of the root of the filesystem followed by
    the <code class="Fl">-alldirs</code> flag; this form allows the host(s) to
    mount at any point within the filesystem, including regular files. Note that
    the <code class="Fl">-alldirs</code> option should not be used as a security
    measure to make clients mount only those subdirectories that they should
    have access to. A client can still access the whole filesystem via
    individual RPCs if it wanted to, even if just one subdirectory has been
    mounted. The pathnames must not have any symbolic links in them and should
    not have any &#x201C;.&#x201D; or &#x201C;..&#x201D; components. Mount
    points for a filesystem may appear on multiple lines each with different
    sets of hosts and export options.</p>
<p class="Pp">The second component of a line specifies how the filesystem is to
    be exported to the host set. The option flags specify whether the filesystem
    is exported read-only or read-write and how the client uid is mapped to user
    credentials on the server.</p>
<p class="Pp">Export options are specified as follows:</p>
<p class="Pp"><code class="Fl">-maproot</code><span class="No">=</span><var class="Ar">user</var>
    The credential of the specified user is used for remote access by root. The
    credential includes all the groups to which the user is a member on the
    local machine (see <a class="Xr" href="../html1/id.html">id(1)</a>). The
    user may be specified by name or number.</p>
<p class="Pp"><code class="Fl">-maproot</code><span class="No">=</span><var class="Ar">user</var>:<var class="Ar">group1</var>:<var class="Ar">group2</var>:<var class="Ar">...</var>
    The colon separated list is used to specify the precise credential to be
    used for remote access by root. The elements of the list may be either names
    or numbers. Note that user: should be used to distinguish a credential
    containing no groups from a complete credential for that user.</p>
<p class="Pp"><code class="Fl">-mapall</code><span class="No">=</span><var class="Ar">user</var>
    or
    <code class="Fl">-mapall</code><span class="No">=</span><var class="Ar">user</var>:<var class="Ar">group1</var>:<var class="Ar">group2</var>:<var class="Ar">...</var>
    specifies a mapping for all client uids (including root) using the same
    semantics as <code class="Fl">-maproot</code>.</p>
<p class="Pp">The option <code class="Fl">-r</code> is a synonym for
    <code class="Fl">-maproot</code> in an effort to be backward compatible with
    older export file formats.</p>
<p class="Pp">In the absence of <code class="Fl">-maproot</code> and
    <code class="Fl">-mapall</code> options, remote accesses by root will result
    in using a credential of -2:-2. All other users will be mapped to their
    remote credential. If a <code class="Fl">-maproot</code> option is given,
    remote access by root will be mapped to that credential instead of -2:-2. If
    a <code class="Fl">-mapall</code> option is given, all users (including
    root) will be mapped to that credential in place of their own.</p>
<p class="Pp">The <code class="Fl">-kerb</code> option specifies that the
    Kerberos authentication server should be used to authenticate and map client
    credentials. This option is currently not implemented.</p>
<p class="Pp">The <code class="Fl">-ro</code> option specifies that the
    filesystem should be exported read-only (default read/write). The option
    <code class="Fl">-o</code> is a synonym for <code class="Fl">-ro</code> in
    an effort to be backward compatible with older export file formats.</p>
<p class="Pp">The <code class="Fl">-noresvport</code> option specifies that NFS
    RPC calls for the filesystem do not have to come from reserved ports.
    Normally, clients are required to use reserved ports for operations. Using
    this option decreases the security of your system.</p>
<p class="Pp">The <code class="Fl">-noresvmnt</code> option specifies that mount
    RPC requests for the filesystem do not have to come from reserved ports.
    Normally, clients are required to use reserved ports for mount requests.
    Using this option decreases the security of your system.</p>
<p class="Pp">WebNFS exports strictly according to the spec (RFC 2054 and RFC
    2055) can be done with the <code class="Fl">-public</code> flag. However,
    this flag in itself allows r/w access to all files in the filesystem, not
    requiring reserved ports and not remapping uids. It is only provided to
    conform to the spec, and should normally not be used. For a WebNFS export,
    use the <code class="Fl">-webnfs</code> flag, which implies
    <code class="Fl">-public</code>,
    <code class="Fl">-mapall</code><span class="No">=</span><var class="Ar">nobody</var>
    and <code class="Fl">-ro</code>.</p>
<p class="Pp">A
    <code class="Fl">-index</code><span class="No">=</span><var class="Ar">file</var>
    option can be used to specify a file whose handle will be returned if a
    directory is looked up using the public filehandle (WebNFS). This is to
    mimic the behavior of URLs. If no <code class="Fl">-index</code> option is
    specified, a directory filehandle will be returned as usual. The
    <code class="Fl">-index</code> option only makes sense in combination with
    the <code class="Fl">-public</code> or <code class="Fl">-webnfs</code>
    flags.</p>
<p class="Pp"></p>
<div class="Bf Sy">Warning: exporting a filesystem both using WebNFS and
  read/write in the normal way to other hosts should be avoided in an
  environment that is vulnerable to IP spoofing.</div>
WebNFS enables any client to get filehandles to the exported filesystem. Using
  IP spoofing, a client could then pretend to be a host to which the same
  filesystem was exported read/write, and use the handle to gain access to that
  filesystem.
<p class="Pp">The third component of a line specifies the host set to which the
    line applies. If no host set is specified, the filesystem is exported to
    everyone. The set may be specified in three ways. The first way is to list
    the host name(s) separated by white space. (Standard internet
    &#x201C;dot&#x201D; addresses may be used in place of names.) The second way
    is to specify a &#x201C;netgroup&#x201D; as defined in the netgroup file
    (see <a class="Xr" href="../html5/netgroup.html">netgroup(5)</a>). A
    netgroup that contains an item that does have a host entry is treated like
    an error. The third way is to specify an internet subnetwork using a network
    and network mask that is defined as the set of all hosts with addresses
    within the subnetwork. This latter approach requires less overhead within
    the kernel and is recommended for cases where the export line refers to a
    large number of clients within an administrative subnet.</p>
<p class="Pp">The first two cases are specified by simply listing the name(s)
    separated by whitespace. All names are checked to see if they are
    &#x201C;netgroup&#x201D; names first and are assumed to be hostnames
    otherwise. Using the full domain specification for a hostname can normally
    circumvent the problem of a host that has the same name as a netgroup. The
    third case is specified by the flag
    <code class="Fl">-network</code><span class="No">=</span><var class="Ar">netname</var>[<span class="No">/</span><var class="Ar">prefixlength</var>]
    and optionally
    <code class="Fl">-mask</code><span class="No">=</span><var class="Ar">netmask</var>.
    The netmask may be specified either by attaching a
    <var class="Ar">prefixlength</var> to the <code class="Fl">-network</code>
    option, or by using a separate <code class="Fl">-mask</code> option. If the
    mask is not specified, it will default to the mask for that network class
    (A, B or C; see <a class="Xr" href="../html4/inet.html">inet(4)</a>).</p>
<p class="Pp">Scoped IPv6 address must carry scope identifier as documented in
    <a class="Xr" href="../html4/inet6.html">inet6(4)</a>. For example,
    &#x201C;fe80::%ne2/10&#x201D; is used to specify fe80::/10 on ne2
  interface.</p>
<p class="Pp">For example:</p>
<div class="Bd Pp Bd-indent">
<pre>
/usr /usr/local -maproot=0:10 friends
/usr -maproot=daemon grumpy.cis.uoguelph.ca 131.104.48.16
/usr -ro -mapall=nobody
/u -maproot=bin: -network 131.104.48 -mask 255.255.255.0
/a -network 192.168.0/24
/a -network 3ffe:1ce1:1:fe80::/64
/u2 -maproot=root friends
/u2 -alldirs -kerb -network cis-net -mask cis-mask
</pre>
</div>
<p class="Pp">Given that <span class="Pa">/usr</span>,
    <span class="Pa">/u</span>, and <span class="Pa">/u2</span> are local
    filesystem mount points, the above example specifies the following:
    <span class="Pa">/usr</span> is exported to hosts <i class="Em">friends</i>
    where friends is specified in the netgroup file with users mapped to their
    remote credentials and root mapped to uid 0 and group 10. It is exported
    read-write and the hosts in &#x201C;friends&#x201D; can mount either
    <span class="Pa">/usr</span> or <span class="Pa">/usr/local</span>. It is
    exported to <i class="Em">131.104.48.16</i> and
    <i class="Em">grumpy.cis.uoguelph.ca</i> with users mapped to their remote
    credentials and root mapped to the user and groups associated with
    &#x201C;daemon&#x201D;; it is exported to the rest of the world as read-only
    with all users mapped to the user and groups associated with
    &#x201C;nobody&#x201D;.</p>
<p class="Pp"><span class="Pa">/u</span> is exported to all hosts on the
    subnetwork <i class="Em">131.104.48</i> with root mapped to the uid for
    &#x201C;bin&#x201D; and with no group access.</p>
<p class="Pp"><span class="Pa">/u2</span> is exported to the hosts in
    &#x201C;friends&#x201D; with root mapped to uid and groups associated with
    &#x201C;root&#x201D;; it is exported to all hosts on network
    &#x201C;cis-net&#x201D; allowing mounts at any directory within /u2 and
    mapping all uids to credentials for the principal that is authenticated by a
    Kerberos ticket.</p>
<p class="Pp"><span class="Pa">/a</span> is exported to the network 192.168.0.0,
    with a netmask of 255.255.255.0. However, the netmask length in the entry
    for /a is not specified through a -mask option, but through the /prefix
    notation.</p>
<p class="Pp"><span class="Pa">/a</span> is also exported to the IPv6 network
    3ffe:1ce1:1:fe80:: address, using the upper 64 bits as the prefix. Note
    that, unlike with IPv4 network addresses, the specified network address must
    be complete, and not just contain the upper bits. With IPv6 addresses, the
    -mask option must not be used.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">/etc/exports</span></dt>
  <dd>The default remote mount-point file.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<a class="Xr" href="../html5/netgroup.html">netgroup(5)</a>,
  <a class="Xr" href="../html8/mountd.html">mountd(8)</a>,
  <a class="Xr" href="../html8/nfsd.html">nfsd(8)</a>,
  <a class="Xr" href="../html8/showmount.html">showmount(8)</a>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
Don't re-export NFS-mounted filesystems unless you are sure of the implications.
  NFS has some assumptions about the characteristics of the file systems being
  exported, e.g. when timestamps are updated. Re-exporting should work to some
  extent and can even be useful in some cases, but don't expect it works as well
  as with local file systems.
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
The export options are tied to the local mount points in the kernel and must be
  non-contradictory for any exported subdirectory of the local server mount
  point. It is recommended that all exported directories within the same server
  filesystem be specified on adjacent lines going down the tree. You cannot
  specify a hostname that is also the name of a netgroup. Specifying the full
  domain specification for a hostname can normally circumvent the problem.
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">October 8, 2006</td>
    <td class="foot-os">NetBSD 10.99</td>
  </tr>
</table>
</body>
</html>
